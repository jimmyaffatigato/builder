var c=Object.create;var d=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var g=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of b(e))!h.call(o,i)&&i!==t&&d(o,i,{get:()=>e[i],enumerable:!(s=p(e,i))||s.enumerable});return o};var v=(o,e,t)=>(t=o!=null?c(f(o)):{},g(e||!o||!o.__esModule?d(t,"default",{value:o,enumerable:!0}):t,o));var n=v(require("esbuild")),l=require("process"),a=require("fs/promises");w();async function w(){if(l.argv[2]=="--help"||l.argv[2]=="--h"){["builder v1.0.0 - Help","Portable bundling script for `esbuild` with easy-access JSON options.","`build.js` invokes the nearest `esbuild` installation with the options in `build-options.json`.",`
Usage:`,"node build.js","node build.js --watch","node build.js --serve","node build.js --help"].forEach(i=>{console.log(i)});return}console.log("builder v1.0.0"),console.log(`esbuild v${n.version}`);let o;try{o=await(0,a.readFile)("build-options.json","utf-8")}catch{console.log("No options file found. `Creating build-options.json`"),await(0,a.writeFile)("build-options.json",JSON.stringify({buildOptions:{},serveOptions:{}}));return}let{buildOptions:e,serveOptions:t}=JSON.parse(o);if(e?.entryPoints&&console.log(`Entry points: ${e.entryPoints.join(", ")}`),e?.outfile&&console.log(`Outfile: ${e.outfile}`),e?.platform&&console.log(`Platform: ${e.platform}`),e.metafile=!0,l.argv[2]){let s=l.argv[2];e.define={},e.define.COMPILETIME=`"${new Date().toLocaleString()}"`;let i=await n.context(e);if(s=="--serve"){let r=await i.serve(t);console.log(`Server hosting ${t?.servedir?t.servedir:""} at ${r.host}:${r.port}`)}else s=="--watch"&&(await i.watch(),console.log("Watching"))}else{let s=performance.now(),i=await n.build(e),r=performance.now(),u=await n.analyzeMetafile(i.metafile,{verbose:!0});console.log(u),console.log(`Completed in ${(r-s).toFixed(0)}ms`)}}
