var u=Object.create;var d=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var h=(o,e,s,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of f(e))!g.call(o,i)&&i!==s&&d(o,i,{get:()=>e[i],enumerable:!(t=p(e,i))||t.enumerable});return o};var v=(o,e,s)=>(s=o!=null?u(b(o)):{},h(e||!o||!o.__esModule?d(s,"default",{value:o,enumerable:!0}):s,o));var n=v(require("esbuild")),l=require("process"),a=require("fs/promises");m();async function m(){if(l.argv[2]=="--help"||l.argv[2]=="--h"){["builder v1.0.0 - Help","Portable bundling script for `esbuild` with easy-access JSON options.","`build.js` invokes the nearest `esbuild` installation with the options in `build-options.json`.",`
Usage:`,"node build.js","node build.js --watch","node build.js --serve","node build.js --help"].forEach(i=>{console.log(i)});return}console.log("builder v1.0.0"),console.log(`esbuild v${n.version}`);let o;try{o=await(0,a.readFile)("build-options.json","utf-8")}catch{console.log("No options file found. `Creating build-options.json`"),await(0,a.writeFile)("build-options.json",JSON.stringify({buildOptions:{},serveOptions:{}}));return}let{buildOptions:e,serveOptions:s}=JSON.parse(o);if(e?.entryPoints&&console.log(`Entry points: ${e.entryPoints.join(", ")}`),e?.outfile&&console.log(`Outfile: ${e.outfile}`),e?.platform&&console.log(`Platform: ${e.platform}`),e.metafile=!0,l.argv[2]){let t=l.argv[2];e.define={},e.define.COMPILETIME=`"${new Date().toLocaleString()}"`;let i=await n.context(e);if(t=="--serve"){let r=await i.serve(s);console.log(`Server hosting ${s?.servedir?s.servedir:""} at ${r.host}:${r.port}`)}else t=="--watch"&&(await i.watch(),console.log("Watching"))}else{let t=performance.now(),i=await n.build(e),r=performance.now(),c=await n.analyzeMetafile(i.metafile,{verbose:!0});console.log(c),console.log(`Completed in ${(r-t).toFixed(0)}ms`)}}
